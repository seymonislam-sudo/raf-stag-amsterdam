// =============================================
// THEME TOGGLE â€” TEXT SWAP MAPPINGS
// Mapped to your ACTUAL site content
// =============================================

const corporateText = {
heroTitle: â€˜Q1 2026 TEAM OFFSITEâ€™,
navLogo: â€˜J.P. MORGAN â€” TEAM EVENTâ€™,
footerLogo: â€˜J.P. MORGAN â€¢ Q1 2026 TEAM OFFSITEâ€™,
footerText: â€˜AMSTERDAM â€¢ MARCH 6-8, 2026â€™,
footerWarning: â€˜Â© 2026 J.P. MORGAN CHASE & CO. THIS IS SATIRE.â€™,
sectionTitles: {
â€˜THE LINEUPâ€™: â€˜ATTENDEE ROSTERâ€™,
â€˜TOUR DATESâ€™: â€˜AGENDAâ€™,
â€˜THE SETLISTâ€™: â€˜ACTION ITEMSâ€™,
â€˜BACKSTAGE PASSâ€™: â€˜DOCUMENT REPOSITORYâ€™,
â€˜TOUR RULESâ€™: â€˜COMPLIANCE GUIDELINESâ€™
},
sectionSubtitles: {
â€˜THE WARRIORS RIDING INTO BATTLEâ€™: â€˜APPROVED PARTICIPANTS â€” HR CLEAREDâ€™,
â€˜3 NIGHTS OF CHAOSâ€™: â€˜SCHEDULED ACTIVITIESâ€™,
â€˜GREATEST HITSâ€™: â€˜DELIVERABLES & MILESTONESâ€™,
â€˜UPLOAD YOUR PHOTOS FROM THE TOURâ€™: â€˜UPLOAD SUPPORTING MATERIALSâ€™,
â€˜BREAK THEM AT YOUR PERILâ€™: â€˜MANDATORY â€” PER COMPLIANCE POLICY Â§7.3â€™
},
roles: {
â€˜HEADLINER â€¢ THE GROOMâ€™: â€˜PROJECT LEADâ€™,
â€˜BEST MAN â€¢ TALL FRENCH GUYâ€™: â€˜DEPUTY PROJECT LEAD (EMEA)â€™,
â€˜THE DUTCH GUY â€¢ TALLâ€™: â€˜REGIONAL STAKEHOLDER (BENELUX)â€™,
â€˜TALL FRENCH GUYâ€™: â€˜SENIOR ANALYST (EMEA)â€™,
â€˜THE BOSSâ€™: â€˜EVENT COORDINATORâ€™,
â€˜THE SHORT GUYâ€™: â€˜OPERATIONS ANALYSTâ€™,
â€˜THE TECH GUYâ€™: â€˜TECHNOLOGY SMEâ€™,
â€˜THE CREWâ€™: â€˜TEAM MEMBERâ€™
},
bios: {
â€˜â€œOne last ride before the ball and chainâ€â€™: â€˜â€œCommitted to delivering stakeholder valueâ€â€™
},
dayDates: {
â€˜FRIDAY, MARCH 6â€™: â€˜FRIDAY, 6 MARCH â€” TRAVEL & ONBOARDINGâ€™,
â€˜SATURDAY, MARCH 7â€™: â€˜SATURDAY, 7 MARCH â€” CORE SESSIONSâ€™,
â€˜SUNDAY, MARCH 8â€™: â€˜SUNDAY, 8 MARCH â€” WRAP-UP & DEPARTUREâ€™
},
events: {
â€˜LEAVE CANARY WHARFâ€™: â€˜DEPART CANARY WHARF OFFICEâ€™,
â€˜WHEELS UPâ€™: â€˜SCHEDULED DEPARTUREâ€™,
â€˜TOUCHDOWN AMSTERDAMâ€™: â€˜ARRIVAL â€” AMSTERDAM SCHIPHOLâ€™,
â€˜HOTEL CHECK-INâ€™: â€˜REGISTRATION & BADGE COLLECTIONâ€™,
â€˜FIRST PINTS & DINNERâ€™: â€˜NETWORKING DINNERâ€™,
â€˜LATE NIGHT EXPLORATIONâ€™: â€˜OPTIONAL EVENING SOCIAL (VOLUNTARY)â€™,
â€˜RECOVERY BREAKFASTâ€™: â€˜CONTINENTAL BREAKFAST BRIEFINGâ€™,
â€˜ACTIVITY TBCâ€™: â€˜TEAM-BUILDING WORKSHOPâ€™,
â€˜PUB CRAWL BEGINSâ€™: â€˜CROSS-FUNCTIONAL NETWORKING SESSIONâ€™,
â€˜CLUB NIGHTâ€™: â€˜POST-DINNER NETWORKING EVENTâ€™,
â€˜RECOVERY BRUNCHâ€™: â€˜MORNING DEBRIEF & FEEDBACK SESSIONâ€™,
â€˜HOTEL CHECKOUTâ€™: â€˜CHECKOUT & EXPENSE REPORT SUBMISSIONâ€™,
â€˜DEPARTURE TO AIRPORTâ€™: â€˜TRANSPORT TO SCHIPHOLâ€™,
â€˜FLIGHT HOMEâ€™: â€˜SCHEDULED RETURN FLIGHTâ€™,
â€˜MEMORIES FOREVERâ€™: â€˜ACTION ITEMS & FOLLOW-UPSâ€™
},
locations: {
â€˜ðŸ“ DLR to London City Airportâ€™: â€˜ðŸ“ Pre-approved transport routeâ€™,
â€˜ðŸ“ BA8459 departs London Cityâ€™: â€˜ðŸ“ BA8459 â€” Corporate Travel bookedâ€™,
â€˜ðŸ“ Schiphol Airportâ€™: â€˜ðŸ“ Schiphol Airport â€” Ground transport arrangedâ€™,
â€˜ðŸ“ Leidseplein Areaâ€™: â€˜ðŸ“ Pre-approved venue (budget ref: Q1-OFFSITE-2026)â€™,
â€˜ðŸ“ You know whereâ€¦â€™: â€˜ðŸ“ Participation voluntary. Taxi receipts accepted.â€™,
â€˜ðŸ“ Hotelâ€™: â€˜ðŸ“ Hotel â€” included with room bookingâ€™,
â€˜ðŸ“ Shooting Range / Go-Karts / Beer Bikes?â€™: â€˜ðŸ“ See attached options. H&S assessment pending.â€™,
â€˜ðŸ“ Paradiso / Melkweg TBCâ€™: â€˜ðŸ“ Venue TBC â€” smart casual dress code appliesâ€™,
â€˜ðŸ“ Hotel / Local Spotâ€™: â€˜ðŸ“ Hotel meeting room Bâ€™,
â€˜ðŸ“ Amsterdam Schipholâ€™: â€˜ðŸ“ Amsterdam Schiphol â€” allow 2hrsâ€™,
â€˜ðŸ“ BA0439 to London Cityâ€™: â€˜ðŸ“ BA0439 â€” Corporate Travel bookedâ€™,
â€˜ðŸ“ In our hearts (and photos)â€™: â€˜ðŸ“ Deliverables due within 5 business daysâ€™
},
tracks: {
â€˜Canal Cruise & Beersâ€™: â€˜Stakeholder Alignment Exercise (Canal)â€™,
â€˜Heineken Experienceâ€™: â€˜Cultural Immersion Workshop (Brewery)â€™,
â€˜Coffee Shop Tour (Educational)â€™: â€˜Market Research Field Studyâ€™,
â€˜Red Light Districtâ€™: â€˜Urban Economics Walking Tourâ€™,
â€˜Dam Square Mayhemâ€™: â€˜City Centre Team Morale Activityâ€™,
â€˜Stag Costume Revealâ€™: â€˜Team Branding Initiativeâ€™,
â€˜Epic Night Outâ€™: â€˜Extended Networking Sessionâ€™,
â€˜3AM Kebabs & Regretsâ€™: â€˜Post-Session Sustenance & Retrospectiveâ€™
},
rules: [
â€˜All discussions during the offsite are subject to information barriers and need-to-know protocols.â€™,
â€˜Ensure the Project Lead is adequately hydrated and supported at all times.â€™,
â€˜No team member shall be left unaccounted for, per H&S Policy Â§4.2.â€™,
â€˜Team branding materials must be worn during all Day 2 sessions.â€™,
â€˜Forfeit penalties apply for: referencing personal commitments, checking Outlook, or failing to engage.â€™,
â€˜All sessions must be documented. If undocumented, the session did not occur.â€™,
â€˜Emergency contact: Building Security. Do not improvise.â€™,
â€˜The Project Lead has final approval on all decisions. Except when incapacitated.â€™
]
};

function reverseMap(map) {
const r = {};
for (const [k, v] of Object.entries(map)) r[v] = k;
return r;
}

const rockText = {
heroTitle: â€˜THE FINAL SEND-OFF TOURâ€™,
navLogo: â€˜RAF TOUR 2026â€™,
footerLogo: â€˜RAF â€¢ THE FINAL SEND-OFF TOURâ€™,
footerText: â€˜AMSTERDAM â€¢ MARCH 6-8, 2026â€™,
footerWarning: â€˜âš ï¸ PARENTAL ADVISORY: EXPLICIT CONTENT âš ï¸â€™,
sectionTitles: reverseMap(corporateText.sectionTitles),
sectionSubtitles: reverseMap(corporateText.sectionSubtitles),
roles: reverseMap(corporateText.roles),
bios: reverseMap(corporateText.bios),
dayDates: reverseMap(corporateText.dayDates),
events: reverseMap(corporateText.events),
locations: reverseMap(corporateText.locations),
tracks: reverseMap(corporateText.tracks),
rules: [
â€˜What happens in Amsterdam, gets posted in the group chatâ€™,
â€˜The groom drinks for free (or pays double, we'll decide)â€™,
â€˜No man left behind (unless he's being arrested)â€™,
â€˜Costume must be worn at all times on Day 2â€™,
â€˜Forfeit drinks for: mentioning the wedding, checking work emails, boring conversationâ€™,
â€˜Photos or it didn't happenâ€™,
â€˜Emergency contact: Don't call anyone, we're adultsâ€™,
â€˜What Raf says, goes. Except when he's too drunk to talk.â€™
]
};

function swapText(map, selector) {
document.querySelectorAll(selector).forEach(el => {
const text = el.textContent.trim();
if (map[text]) el.textContent = map[text];
});
}

function swapHTML(map, selector) {
document.querySelectorAll(selector).forEach(el => {
const text = el.textContent.trim();
if (map[text]) el.textContent = map[text];
});
}

function createFlash() {
let flash = document.querySelector(â€™.theme-flashâ€™);
if (!flash) {
flash = document.createElement(â€˜divâ€™);
flash.className = â€˜theme-flashâ€™;
document.body.appendChild(flash);
}
flash.classList.remove(â€˜activeâ€™);
void flash.offsetWidth;
flash.classList.add(â€˜activeâ€™);
setTimeout(() => flash.classList.remove(â€˜activeâ€™), 500);
}

function applyThemeText(source) {
const heroTitle = document.getElementById(â€˜heroTitleâ€™);
if (heroTitle) {
heroTitle.textContent = source.heroTitle;
heroTitle.setAttribute(â€˜data-textâ€™, source.heroTitle);
}
const navLogo = document.getElementById(â€˜navLogoâ€™);
if (navLogo) navLogo.textContent = source.navLogo;
const footerLogo = document.getElementById(â€˜footerLogoâ€™);
if (footerLogo) footerLogo.textContent = source.footerLogo;
const footerText = document.getElementById(â€˜footerTextâ€™);
if (footerText) footerText.textContent = source.footerText;
const footerWarning = document.getElementById(â€˜footerWarningâ€™);
if (footerWarning) footerWarning.textContent = source.footerWarning;

```
swapText(source.sectionTitles, '.section-title');
swapText(source.sectionSubtitles, '.section-subtitle');
swapText(source.roles, '.lineup-role');
swapText(source.bios, '.lineup-bio');
swapText(source.dayDates, '.day-date');
swapText(source.events, '.event-name');
swapHTML(source.locations, '.event-location');
swapText(source.tracks, '.track-name');

if (source.rules) {
    document.querySelectorAll('.rule-text').forEach((el, i) => {
        if (source.rules[i]) el.textContent = source.rules[i];
    });
}

const uploadText = document.querySelector('.upload-text');
const uploadSub = document.querySelector('.upload-subtext');
if (source === corporateText) {
    if (uploadText) uploadText.textContent = 'Click to Upload Supporting Materials';
    if (uploadSub) uploadSub.textContent = 'Approved file formats only';
} else {
    if (uploadText) uploadText.textContent = 'Click or Drag Photos Here';
    if (uploadSub) uploadSub.textContent = 'Share the chaos with the crew';
}

document.querySelectorAll('.lineup-card img').forEach(img => {
    const src = img.getAttribute('src');
    if (!src) return;
    if (source === corporateText) {
        if (!src.includes('_corp')) img.setAttribute('src', src.replace(/(\.\w+)$/, '_corp$1'));
    } else {
        img.setAttribute('src', src.replace('_corp', ''));
    }
});

const heroImg = document.querySelector('.hero-image');
if (heroImg) {
    const src = heroImg.getAttribute('src');
    if (source === corporateText) {
        if (!src.includes('_corp')) heroImg.setAttribute('src', src.replace(/(\.\w+)$/, '_corp$1'));
    } else {
        heroImg.setAttribute('src', src.replace('_corp', ''));
    }
}
```

}

function toggleTheme() {
const html = document.documentElement;
const current = html.getAttribute(â€˜data-themeâ€™);
const next = current === â€˜rockâ€™ ? â€˜corporateâ€™ : â€˜rockâ€™;
createFlash();
html.setAttribute(â€˜data-themeâ€™, next);
applyThemeText(next === â€˜corporateâ€™ ? corporateText : rockText);
localStorage.setItem(â€˜rafstag-themeâ€™, next);
}

// =============================================
// COUNTDOWN
// =============================================

let confettiFired = false;

function updateCountdown() {
const tourDate = new Date(â€˜2026-03-06T14:00:00â€™).getTime();
const now = new Date().getTime();
const distance = tourDate - now;

```
const countdown = document.getElementById('countdown');
const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');

if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;

if (distance <= 0) {
    daysEl.textContent = '00';
    hoursEl.textContent = '00';
    minutesEl.textContent = '00';
    secondsEl.textContent = '00';
    if (countdown) countdown.className = 'countdown zero';
    if (!confettiFired) { confettiFired = true; launchConfetti(); }
    return;
}

const days = Math.floor(distance / (1000 * 60 * 60 * 24));
const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
const seconds = Math.floor((distance % (1000 * 60)) / 1000);

animateValue(daysEl, days);
animateValue(hoursEl, hours);
animateValue(minutesEl, minutes);
animateValue(secondsEl, seconds);

if (countdown) {
    countdown.classList.remove('urgent', 'critical', 'zero');
    if (days <= 3 && days > 0) countdown.classList.add('urgent');
    else if (days === 0 && distance > 0) countdown.classList.add('critical');
}
```

}

function animateValue(el, value) {
const formatted = String(value).padStart(2, â€˜0â€™);
if (el.textContent !== formatted) {
el.style.transform = â€˜scale(1.15)â€™;
el.textContent = formatted;
setTimeout(() => { el.style.transform = â€˜scale(1)â€™; }, 200);
}
}

// =============================================
// CONFETTI
// =============================================

function launchConfetti() {
const container = document.getElementById(â€˜confettiContainerâ€™);
if (!container) return;
const colors = [â€™#FF0000â€™, â€˜#FFD700â€™, â€˜#00FF00â€™, â€˜#FF69B4â€™, â€˜#00BFFFâ€™, â€˜#FF4500â€™, â€˜#FFFFFFâ€™];
for (let i = 0; i < 150; i++) {
setTimeout(() => {
const piece = document.createElement(â€˜divâ€™);
piece.className = â€˜confetti-pieceâ€™;
piece.style.left = Math.random() * 100 + â€˜vwâ€™;
piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
piece.style.width = (Math.random() * 10 + 5) + â€˜pxâ€™;
piece.style.height = (Math.random() * 10 + 5) + â€˜pxâ€™;
piece.style.borderRadius = Math.random() > 0.5 ? â€˜50%â€™ : â€˜0â€™;
piece.style.animationDuration = (Math.random() * 3 + 2) + â€˜sâ€™;
piece.style.opacity = Math.random() * 0.7 + 0.3;
container.appendChild(piece);
setTimeout(() => piece.remove(), 5000);
}, Math.random() * 2000);
}
}

// =============================================
// NOTIFICATION SYSTEM
// =============================================

function showNotification(message) {
const notification = document.createElement(â€˜divâ€™);
notification.style.cssText = `position: fixed; top: 100px; right: 20px; background: var(--accent, #FF0000); color: #fff; padding: 20px 30px; border-radius: 10px; font-size: 18px; font-family: Arial, sans-serif; z-index: 10000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: slideIn 0.3s ease-out;`;
notification.textContent = message;
document.body.appendChild(notification);
setTimeout(() => {
notification.style.animation = â€˜slideOut 0.3s ease-outâ€™;
setTimeout(() => { if (notification.parentNode) document.body.removeChild(notification); }, 300);
}, 3000);
}

const style = document.createElement(â€˜styleâ€™);
style.textContent = `@keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } } @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(400px); opacity: 0; } }`;
document.head.appendChild(style);

// =============================================
// PARALLAX
// =============================================

window.addEventListener(â€˜scrollâ€™, function() {
if (document.documentElement.getAttribute(â€˜data-themeâ€™) === â€˜corporateâ€™) return;
const scrolled = window.pageYOffset;
const hero = document.querySelector(â€™.hero-imageâ€™);
if (hero) hero.style.transform = `translateY(${scrolled * 0.3}px)`;
});

// =============================================
// MOBILE MENU TOGGLE
// =============================================

const logo = document.querySelector(â€™.logoâ€™);
if (logo) {
logo.addEventListener(â€˜dblclickâ€™, function() {
document.querySelectorAll(â€™.nav-linksâ€™).forEach(nav => {
nav.style.display = nav.style.display === â€˜flexâ€™ ? â€˜noneâ€™ : â€˜flexâ€™;
});
});
}

// =============================================
// SMOOTH SCROLLING
// =============================================

document.querySelectorAll(â€˜a[href^=â€#â€]â€™).forEach(anchor => {
anchor.addEventListener(â€˜clickâ€™, function (e) {
e.preventDefault();
const target = document.querySelector(this.getAttribute(â€˜hrefâ€™));
if (target) target.scrollIntoView({ behavior: â€˜smoothâ€™, block: â€˜startâ€™ });
});
});

// =============================================
// LIGHTBOX
// =============================================

(function() {
const overlay  = document.getElementById(â€˜lightboxOverlayâ€™);
const img      = document.getElementById(â€˜lightboxImgâ€™);
const closeBtn = document.getElementById(â€˜lightboxCloseâ€™);
const prevBtn  = document.getElementById(â€˜lightboxPrevâ€™);
const nextBtn  = document.getElementById(â€˜lightboxNextâ€™);
const counter  = document.getElementById(â€˜lightboxCounterâ€™);

```
if (!overlay) return;

let photos  = [];
let current = 0;

function getPhotos() {
    return [...document.querySelectorAll('.photo-item img')].map(i => i.src);
}

function open(index) {
    photos = getPhotos();
    if (!photos.length) return;
    current = index;
    show();
    overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function close() {
    overlay.classList.remove('active');
    document.body.style.overflow = '';
}

function show() {
    img.src = photos[current];
    counter.textContent = `${current + 1} / ${photos.length}`;
    prevBtn.style.visibility = photos.length > 1 ? 'visible' : 'hidden';
    nextBtn.style.visibility = photos.length > 1 ? 'visible' : 'hidden';
}

function prev() { current = (current - 1 + photos.length) % photos.length; show(); }
function next() { current = (current + 1) % photos.length; show(); }

// Delegated click on photo grid â€” works for dynamically added photos
const photoGrid = document.getElementById('photoGrid');
if (photoGrid) {
    photoGrid.addEventListener('click', e => {
        const item = e.target.closest('.photo-item');
        if (!item) return;
        const imgs = [...document.querySelectorAll('.photo-item img')];
        open(imgs.indexOf(item.querySelector('img')));
    });
}

closeBtn.addEventListener('click', close);
prevBtn.addEventListener('click', e => { e.stopPropagation(); prev(); });
nextBtn.addEventListener('click', e => { e.stopPropagation(); next(); });
overlay.addEventListener('click', e => { if (e.target === overlay) close(); });

document.addEventListener('keydown', e => {
    if (!overlay.classList.contains('active')) return;
    if (e.key === 'Escape') close();
    if (e.key === 'ArrowLeft') prev();
    if (e.key === 'ArrowRight') next();
});
```

})();

// =============================================
// INIT
// =============================================

document.addEventListener(â€˜DOMContentLoadedâ€™, function() {
const saved = localStorage.getItem(â€˜rafstag-themeâ€™);
if (saved && saved !== â€˜rockâ€™) {
document.documentElement.setAttribute(â€˜data-themeâ€™, saved);
applyThemeText(corporateText);
}

```
const toggleBtn = document.getElementById('themeToggle');
if (toggleBtn) toggleBtn.addEventListener('click', toggleTheme);

updateCountdown();
setInterval(updateCountdown, 1000);
```

});
