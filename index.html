<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAF - THE FINAL SEND-OFF TOUR | Amsterdam 2026</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Parental Advisory Banner -->
    <div class="advisory-banner">
        <div class="advisory-label">PARENTAL ADVISORY</div>
        <div class="advisory-text">EXPLICIT CONTENT</div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="logo">RAF TOUR 2026</div>
            <ul class="nav-links">
                <li><a href="#home">HOME</a></li>
                <li><a href="#lineup">THE LINEUP</a></li>
                <li><a href="#tour-dates">TOUR DATES</a></li>
                <li><a href="#setlist">SETLIST</a></li>
                <li><a href="#gallery">BACKSTAGE</a></li>
                <li><a href="#rules">TOUR RULES</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <img src="raf_viking.png" alt="RAF - The Final Send-Off Tour" class="hero-image">
            <div class="hero-text">
                <h1 class="glitch" data-text="THE FINAL SEND-OFF TOUR">THE FINAL SEND-OFF TOUR</h1>
                <h2>AMSTERDAM ‚Ä¢ MARCH 6-8, 2026</h2>
                <div class="countdown" id="countdown">
                    <div class="countdown-item">
                        <span class="countdown-value" id="days">00</span>
                        <span class="countdown-label">DAYS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="hours">00</span>
                        <span class="countdown-label">HOURS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="minutes">00</span>
                        <span class="countdown-label">MINS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-value" id="seconds">00</span>
                        <span class="countdown-label">SECS</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="scroll-indicator">SCROLL FOR MORE ‚ñº</div>
    </section>

    <!-- The Lineup Section -->
    <section id="lineup" class="lineup-section">
        <h2 class="section-title">THE LINEUP</h2>
        <div class="section-subtitle">THE WARRIORS RIDING INTO BATTLE</div>
        
        <div class="lineup-grid">
            <div class="lineup-card headliner">
                <img src="Raf2.PNG" alt="Raf">
                <div class="lineup-name">RAF</div>
                <div class="lineup-role">HEADLINER ‚Ä¢ THE GROOM</div>
                <div class="lineup-bio">"One last ride before the ball and chain"</div>
            </div>
            
            <div class="lineup-card">
                <img src="Julien.PNG" alt="Julien">
                <div class="lineup-name">JULIEN</div>
                <div class="lineup-role">BEST MAN ‚Ä¢ TALL FRENCH GUY</div>
            </div>
            
            <div class="lineup-card">
                <img src="Stam.PNG" alt="Stam">
                <div class="lineup-name">STAM</div>
                <div class="lineup-role">THE DUTCH GUY ‚Ä¢ TALL</div>
            </div>
            
            <div class="lineup-card">
                <img src="Antoine.PNG" alt="Antoine">
                <div class="lineup-name">ANTOINE</div>
                <div class="lineup-role">TALL FRENCH GUY</div>
            </div>

            <div class="lineup-card">
                <img src="Seymon.PNG" alt="Seymon">
                <div class="lineup-name">SEYMON</div>
                <div class="lineup-role">THE BOSS</div>
            </div>

            <div class="lineup-card">
                <img src="Pretesh.PNG" alt="Pretesh">
                <div class="lineup-name">PRETESH</div>
                <div class="lineup-role">THE SHORT GUY</div>
            </div>

            <div class="lineup-card">
                <img src="Venkat.PNG" alt="Venkat">
                <div class="lineup-name">VENKAT</div>
                <div class="lineup-role">THE TECH GUY</div>
            </div>

            <div class="lineup-card">
                <div class="lineup-placeholder">üá∑üá∫</div>
                <div class="lineup-name">YEVGENY</div>
                <div class="lineup-role">THE CREW</div>
            </div>

            <div class="lineup-card">
                <div class="lineup-placeholder">1Ô∏è‚É£</div>
                <div class="lineup-name">DAN</div>
                <div class="lineup-role">THE CREW</div>
            </div>

            <div class="lineup-card">
                <div class="lineup-placeholder">2Ô∏è‚É£</div>
                <div class="lineup-name">Dave</div>
                <div class="lineup-role">THE CREW</div>
            </div>
        </div>
    </section>

    <!-- Tour Dates / Itinerary -->
    <section id="tour-dates" class="tour-dates-section">
        <h2 class="section-title">TOUR DATES</h2>
        <div class="section-subtitle">3 NIGHTS OF CHAOS</div>
        
        <div class="tour-schedule">
            <!-- Day 1 -->
            <div class="tour-day">
                <div class="day-header">
                    <div class="day-number">DAY 1</div>
                    <div class="day-date">FRIDAY, MARCH 6</div>
                </div>
                <div class="day-events">
                    <div class="event">
                        <div class="event-time">15:30</div>
                        <div class="event-details">
                            <div class="event-name">LEAVE CANARY WHARF</div>
                            <div class="event-location">üìç DLR to London City Airport</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">17:05</div>
                        <div class="event-details">
                            <div class="event-name">WHEELS UP</div>
                            <div class="event-location">üìç BA8459 departs London City</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">19:15</div>
                        <div class="event-details">
                            <div class="event-name">TOUCHDOWN AMSTERDAM</div>
                            <div class="event-location">üìç Schiphol Airport</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">20:30</div>
                        <div class="event-details">
                            <div class="event-name">HOTEL CHECK-IN</div>
                            <div class="event-location">üìç NH Amsterdam Leidseplein<br>Stadhouderskade 7, 1054 ES Amsterdam</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">21:30</div>
                        <div class="event-details">
                            <div class="event-name">FIRST PINTS & DINNER</div>
                            <div class="event-location">üìç Leidseplein Area</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">00:00</div>
                        <div class="event-details">
                            <div class="event-name">LATE NIGHT EXPLORATION</div>
                            <div class="event-location">üìç You know where...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Day 2 -->
            <div class="tour-day">
                <div class="day-header">
                    <div class="day-number">DAY 2</div>
                    <div class="day-date">SATURDAY, MARCH 7</div>
                </div>
                <div class="day-events">
                    <div class="event">
                        <div class="event-time">10:00</div>
                        <div class="event-details">
                            <div class="event-name">RECOVERY BREAKFAST</div>
                            <div class="event-location">üìç Hotel</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">13:00</div>
                        <div class="event-details">
                            <div class="event-name">ACTIVITY TBC</div>
                            <div class="event-location">üìç Shooting Range / Go-Karts / Beer Bikes?</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">18:00</div>
                        <div class="event-details">
                            <div class="event-name">PUB CRAWL BEGINS</div>
                            <div class="event-location">üìç Leidseplein Area</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">23:00</div>
                        <div class="event-details">
                            <div class="event-name">CLUB NIGHT</div>
                            <div class="event-location">üìç Paradiso / Melkweg TBC</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Day 3 -->
            <div class="tour-day">
                <div class="day-header">
                    <div class="day-number">DAY 3</div>
                    <div class="day-date">SUNDAY, MARCH 8</div>
                </div>
                <div class="day-events">
                    <div class="event">
                        <div class="event-time">10:00</div>
                        <div class="event-details">
                            <div class="event-name">RECOVERY BRUNCH</div>
                            <div class="event-location">üìç Hotel / Local Spot</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">12:00</div>
                        <div class="event-details">
                            <div class="event-name">HOTEL CHECKOUT</div>
                            <div class="event-location">üìç NH Amsterdam Leidseplein</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">14:00</div>
                        <div class="event-details">
                            <div class="event-name">DEPARTURE TO AIRPORT</div>
                            <div class="event-location">üìç Amsterdam Schiphol</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">16:10</div>
                        <div class="event-details">
                            <div class="event-name">FLIGHT HOME</div>
                            <div class="event-location">üìç BA0439 to London City</div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="event-time">‚àû</div>
                        <div class="event-details">
                            <div class="event-name">MEMORIES FOREVER</div>
                            <div class="event-location">üìç In our hearts (and photos)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Setlist / Activities -->
    <section id="setlist" class="setlist-section">
        <h2 class="section-title">THE SETLIST</h2>
        <div class="section-subtitle">GREATEST HITS</div>
        
        <div class="setlist">
            <div class="setlist-item">
                <span class="track-number">01</span>
                <span class="track-name">Canal Cruise & Beers</span>
                <span class="track-duration">üç∫üç∫üç∫</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">02</span>
                <span class="track-name">Heineken Experience</span>
                <span class="track-duration">üç∫üç∫üç∫</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">03</span>
                <span class="track-name">Coffee Shop Tour (Educational)</span>
                <span class="track-duration">üåøüåøüåø</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">04</span>
                <span class="track-name">Red Light District</span>
                <span class="track-duration">üî¥üî¥üî¥</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">05</span>
                <span class="track-name">Dam Square Mayhem</span>
                <span class="track-duration">üéâüéâüéâ</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">06</span>
                <span class="track-name">Stag Costume Reveal</span>
                <span class="track-duration">üëëüëëüëë</span>
            </div>
            <div class="setlist-item">
                <span class="track-number">07</span>
                <span class="track-name">Epic Night Out</span>
                <span class="track-duration">üî•üî•üî•</span>
            </div>
            <div class="setlist-item encore">
                <span class="track-number">ENCORE</span>
                <span class="track-name">3AM Kebabs & Regrets</span>
                <span class="track-duration">üåØüíÄ</span>
            </div>
        </div>
    </section>

    <!-- Photo Gallery -->
    <section id="gallery" class="gallery-section">
        <h2 class="section-title">BACKSTAGE PASS</h2>
        <div class="section-subtitle">UPLOAD YOUR PHOTOS FROM THE TOUR</div>
        
        <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">üì∏</div>
            <div class="upload-text">Click or Drag Photos Here</div>
            <div class="upload-subtext">Share the chaos with the crew</div>
        </div>

        <div class="photo-grid" id="photoGrid">
            <p id="galleryStatus" style="color: #888; text-align: center; width: 100%; padding: 40px 20px;">Loading photos...</p>
        </div>
    </section>

    <!-- Tour Rules -->
    <section id="rules" class="rules-section">
        <h2 class="section-title">TOUR RULES</h2>
        <div class="section-subtitle">BREAK THEM AT YOUR PERIL</div>
        
        <div class="rules-container">
            <div class="rule-card">
                <div class="rule-number">01</div>
                <div class="rule-text">What happens in Amsterdam, gets posted in the group chat</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">02</div>
                <div class="rule-text">The groom drinks for free (or pays double, we'll decide)</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">03</div>
                <div class="rule-text">No man left behind (unless he's being arrested)</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">04</div>
                <div class="rule-text">Costume must be worn at all times on Day 2</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">05</div>
                <div class="rule-text">Forfeit drinks for: mentioning the wedding, checking work emails, boring conversation</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">06</div>
                <div class="rule-text">Photos or it didn't happen</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">07</div>
                <div class="rule-text">Emergency contact: Don't call anyone, we're adults</div>
            </div>
            <div class="rule-card">
                <div class="rule-number">08</div>
                <div class="rule-text">What Raf says, goes. Except when he's too drunk to talk.</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">RAF ‚Ä¢ THE FINAL SEND-OFF TOUR</div>
            <div class="footer-text">AMSTERDAM ‚Ä¢ MARCH 6-8, 2026</div>
            <div class="footer-warning">‚ö†Ô∏è PARENTAL ADVISORY: EXPLICIT CONTENT ‚ö†Ô∏è</div>
            <div class="footer-links">
                <a href="#home">HOME</a>
                <a href="#lineup">LINEUP</a>
                <a href="#tour-dates">DATES</a>
                <a href="#gallery">PHOTOS</a>
            </div>
        </div>
    </footer>

    <!-- Core site functionality (countdown, smooth scroll, parallax, notifications) -->
    <script src="script.js"></script>

    <!-- Cloudinary Photo Upload & Shared Gallery -->
    <script>
        (function() {
            // ==========================================================
            //  CONFIG
            // ==========================================================
            const CLOUD_NAME  = 'dqugijser';
            const UPLOAD_PRESET = 'rafstag_photos';
            const TAG_NAME    = 'rafstag';

            // ==========================================================
            //  DOM
            // ==========================================================
            const uploadZone = document.getElementById('uploadZone');
            const photoGrid  = document.getElementById('photoGrid');
            const statusEl   = document.getElementById('galleryStatus');

            const fileInput  = document.createElement('input');
            fileInput.type   = 'file';
            fileInput.accept = 'image/*';
            fileInput.multiple = true;
            fileInput.style.display = 'none';
            document.body.appendChild(fileInput);

            // De-duplication set (prevents same photo appearing twice)
            const renderedIds = new Set();

            // ==========================================================
            //  UPLOAD ‚Äî click, drag-drop, file select
            // ==========================================================
            uploadZone.addEventListener('click', () => fileInput.click());

            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.style.background = 'rgba(255, 0, 0, 0.2)';
            });
            uploadZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadZone.style.background = '';
            });
            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.style.background = '';
                const imgs = Array.from(e.dataTransfer.files).filter(f => f.type.startsWith('image/'));
                if (imgs.length) runUpload(imgs);
            });

            fileInput.addEventListener('change', (e) => {
                const imgs = Array.from(e.target.files);
                if (imgs.length) runUpload(imgs);
                fileInput.value = '';
            });

            // ---------- upload orchestrator ----------
            async function runUpload(files) {
                const saved = uploadZone.innerHTML;
                let done = 0;

                uploadZone.innerHTML = `
                    <div class="upload-icon">‚è≥</div>
                    <div class="upload-text" id="uploadProgress">Uploading 0 / ${files.length}‚Ä¶</div>
                `;
                const prog = document.getElementById('uploadProgress');

                for (const f of files) {
                    const result = await sendToCloudinary(f);
                    if (result) {
                        done++;
                        renderPhoto(result.public_id, result.secure_url);
                    }
                    prog.textContent = `Uploading ${done} / ${files.length}‚Ä¶`;
                }

                uploadZone.innerHTML = saved;
                if (done) showNotification(`${done} photo${done > 1 ? 's' : ''} uploaded! üì∏`);
            }

            // ---------- single file upload ----------
            async function sendToCloudinary(file) {
                const fd = new FormData();
                fd.append('file', file);
                fd.append('upload_preset', UPLOAD_PRESET);
                fd.append('tags', TAG_NAME);            // ensure tag for listing

                try {
                    const r = await fetch(
                        `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,
                        { method: 'POST', body: fd }
                    );
                    const d = await r.json();
                    if (d.error) {
                        console.error('Upload error:', d.error.message);
                        alert('Upload failed: ' + d.error.message);
                        return null;
                    }
                    return d;
                } catch (e) {
                    console.error('Upload network error:', e);
                    alert('Upload failed ‚Äî check your connection.');
                    return null;
                }
            }

            // ==========================================================
            //  GALLERY ‚Äî render helpers
            // ==========================================================
            function clearStatus() {
                if (statusEl && statusEl.parentNode) statusEl.remove();
            }

            function setStatus(msg) {
                photoGrid.innerHTML =
                    `<p style="color:#888;text-align:center;width:100%;padding:40px 20px;">${msg}</p>`;
            }

            function renderPhoto(publicId, directUrl) {
                clearStatus();
                if (renderedIds.has(publicId)) return;
                renderedIds.add(publicId);

                // Use Cloudinary transformations for consistent thumbnails
                const src = directUrl ||
                    `https://res.cloudinary.com/${CLOUD_NAME}/image/upload/c_fill,w_400,h_400,q_auto,f_auto/${publicId}`;

                const div = document.createElement('div');
                div.className = 'photo-item';
                div.innerHTML = `<img src="${src}" alt="Stag photo" loading="lazy">`;
                photoGrid.insertBefore(div, photoGrid.firstChild);
            }

            // ==========================================================
            //  GALLERY ‚Äî load from Cloudinary (shared across all users)
            //
            //  IMPORTANT: This uses the client-side resource list endpoint:
            //    https://res.cloudinary.com/<cloud>/image/list/<tag>.json
            //
            //  By default this is BLOCKED (returns 401).
            //  TO FIX:
            //    1. Log in to https://console.cloudinary.com
            //    2. Settings ‚Üí Security
            //    3. Under "Restricted media types", UNCHECK "Resource list"
            //    4. Save
            //
            //  After that, every photo tagged "rafstag" (by any user)
            //  will appear in the gallery for everyone.
            //  New uploads take ~60 seconds to appear in the list.
            // ==========================================================
            let galleryLoaded = false;   // track first successful load

            async function loadGallery() {
                const url = `https://res.cloudinary.com/${CLOUD_NAME}/image/list/${TAG_NAME}.json`;

                try {
                    const r = await fetch(url);

                    if (r.status === 401) {
                        console.error(
                            '%c CLOUDINARY RESOURCE LIST IS RESTRICTED ',
                            'background:red;color:white;font-size:14px;padding:4px 8px;',
                            '\nFix: Console ‚Üí Settings ‚Üí Security ‚Üí uncheck "Resource list" ‚Üí Save'
                        );
                        if (!galleryLoaded) {
                            setStatus(
                                '‚ö†Ô∏è Photo gallery is not enabled yet.<br>' +
                                '<small>Admin: Cloudinary ‚Üí Settings ‚Üí Security ‚Üí uncheck "Resource list"</small>'
                            );
                        }
                        return;
                    }

                    if (r.status === 404) {
                        if (!galleryLoaded) setStatus('No photos yet. Be the first to upload!');
                        return;
                    }

                    if (!r.ok) throw new Error(`HTTP ${r.status}`);

                    const data = await r.json();

                    if (!data.resources || data.resources.length === 0) {
                        if (!galleryLoaded) setStatus('No photos yet. Be the first to upload!');
                        return;
                    }

                    galleryLoaded = true;
                    clearStatus();

                    // Sort newest first (by version number which is a unix timestamp)
                    data.resources
                        .sort((a, b) => (b.version || 0) - (a.version || 0))
                        .forEach(res => renderPhoto(res.public_id, null));

                } catch (e) {
                    console.error('Gallery load error:', e);
                    if (!galleryLoaded) {
                        setStatus('No photos yet. Click above to upload the first one!');
                    }
                }
            }

            // Initial load
            loadGallery();

            // Poll every 30s so everyone sees new photos from the crew
            setInterval(loadGallery, 30000);

        })();
    </script>
</body>
</html>
